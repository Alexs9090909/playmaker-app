{"ast":null,"code":"const BASE_URL='https://accounts.spotify.com/authorize';const RESPONSE_TYPE='?response_type=token';const CLIENT_ID=\"&client_id=92b7e448f7fe406eaef359748343fe84\";// const REDIRECT_URL = \"&redirect_uri=http://localhost:3000/\";\nconst REDIRECT_URL='&redirect_uri=https://alexs9090909.github.io/jammming/';const SCOPE='&scope=ugc-image-upload user-read-playback-state user-modify-playback-state user-read-currently-playing playlist-modify-public playlist-modify-private playlist-read-private playlist-read-collaborative';let TOKEN=null;/*  let apiKey = \"BQCIHk_B6sJGR5f0fhBGM8RI7RzvIWsuCANY6NiKAheSpKsteRPEUTU50kmObhMsHq6xitwlf0_MhjoyZVLnxynTbsnmYF1ewXe4zXdhO9IWo4zp3Z09QiP8xI4awFxC36RdVRU5miChXDanugLoF06-_jI9XoUMu38PVYTDtcjqD14txydNHW_DPG5VLiKgSwo73583W9Zoqv1n7KmRzeXfr2eKeNKsdFHeZXKm3uVNbMq-HHelM6x_3BS6jvQRGhMAHKXV7Q\" */ // Access token à renouveler toutes les heures \nconst getToken=()=>{if(TOKEN){return TOKEN;}else if(window.location.hash.length>1){const hashParameters={};// window.location.hash.split('&').forEach(i => hashParameters[i] = i);\nwindow.location.hash.slice(1)// to remove # sign\n.split('&')// to split to paramater/value groups))\n.forEach(item=>{const parameter=item.split('=');hashParameters[parameter[0]]=parameter[1];});TOKEN=hashParameters.access_token;window.history.pushState('Access Token','','/');return TOKEN;}else if(!TOKEN){const URL=BASE_URL+RESPONSE_TYPE+CLIENT_ID+SCOPE+REDIRECT_URL;window.location=URL;}};const Spotify={search(term){let apiKey=getToken();if(!apiKey)return[];return fetch(\"https://api.spotify.com/v1/search?q=\".concat(term,\"&type=track\"),{headers:{Authorization:\"Bearer \".concat(apiKey)}}).then(response=>{return response.json();}).then(jsonResponse=>{const items=jsonResponse.tracks&&jsonResponse.tracks.items;// Vérification de l'existence de jsonResponse.tracks\nif(items){const itemsArray=Object.values(items);return itemsArray;}else{console.log(apiKey);console.error('La propriété \"tracks\" est manquante dans la réponse de l\\'API.');return[];}});},save(playlistTitle,playlistTracks){let apiKey=getToken();if(!apiKey)return[];return fetch(\"https://api.spotify.com/v1/me\",{headers:{Authorization:\"Bearer \".concat(apiKey)}}).then(response=>{return response.json();}).then(jsonResponse=>{console.log(jsonResponse);const user_id=jsonResponse.id;return fetch(\"https://api.spotify.com/v1/users/\".concat(user_id,\"/playlists\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(apiKey)},body:JSON.stringify({\"name\":playlistTitle,\"description\":\"New playlist description\",\"public\":false})}).then(secondResponse=>{return secondResponse.json();},networkError=>console.log(networkError.message)).then(secondJsonResponse=>{const playlist_id=secondJsonResponse.id;// console.log('is playlistTracks an array ? > ' + Array.isArray(playlistTracks));\n// console.log(\"content of playlistTracks is : \" + playlistTracks);\nreturn fetch(\"https://api.spotify.com/v1/users/\".concat(user_id,\"/playlists/\").concat(playlist_id,\"/tracks\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(apiKey)},body:JSON.stringify({\"uris\":playlistTracks})});});}).catch(error=>{console.error('Erreur lors de la requête  :',error);});}};export{Spotify,getToken};/*\n\nhttp://localhost:3000/#access_token=\n\nBQAXmZzANGKXOSaIQaxRlngYF13k3-vjkcTYGIoLthSMBcU_tiYhDtRSeZJr07BxjbZgLR5mmOcsYnnarZYWhK-t-0uX5DS2Vc9pGVwcAOO4GbZiwKC81S1vtLvKMYJhcSCO0kXQa07E1l3yJIm2MIXQ4BTDtoUV1JvHUr2pZ0OKrrP3nPgcYLr2po5V8xtLUhp3MSvAXSf7OW1PiwVMJlEqUY3T8RxUXbjuoIpip4oTh681LyGzHRA5vjmz\n\n&token_type=Bearer&expires_in=3600&state=XPubkNMqxCslAjw0\n\n\nhttp://localhost:3000/#access_token=\n\nBQBQu603MWS2Q51LqWhhpzvX359-d8oxQ4U1YseT05hjzRPKTGV2HXUOabr06FYhbocyvuSDKN-iOSdVfI3Z46y19GtFUr7Gfie1LKnH3VIeoAR-aCtfRqQ28u_FYQ1EnH2cnP7YI8u16cAympJhVNG7PolFX8fRKTI2yLftSx9cJASrv8Yg6c21xrjVOzFYUJwU-CdVByVsIzXohZ8pDtw5E6Pjr0Ws2pwXWxi0tdg3UaZ7Bb_ePpU1swSo\n\n&token_type=Bearer&expires_in=3600&state=emGMhBkNZ1GqYhQw\n\n\n\nhttp://localhost:3000/#access_token=\n\nBQCIHk_B6sJGR5f0fhBGM8RI7RzvIWsuCANY6NiKAheSpKsteRPEUTU50kmObhMsHq6xitwlf0_MhjoyZVLnxynTbsnmYF1ewXe4zXdhO9IWo4zp3Z09QiP8xI4awFxC36RdVRU5miChXDanugLoF06-_jI9XoUMu38PVYTDtcjqD14txydNHW_DPG5VLiKgSwo73583W9Zoqv1n7KmRzeXfr2eKeNKsdFHeZXKm3uVNbMq-HHelM6x_3BS6jvQRGhMAHKXV7Q\n\n&token_type=Bearer&expires_in=3600&state=uTvo6sv20HoYocs8\n\n\n*/ /* faire ctrl+z pour enlever toutes les lignes du haut et ca revient à avant authorization work */","map":{"version":3,"names":["BASE_URL","RESPONSE_TYPE","CLIENT_ID","REDIRECT_URL","SCOPE","TOKEN","getToken","window","location","hash","length","hashParameters","slice","split","forEach","item","parameter","access_token","history","pushState","URL","Spotify","search","term","apiKey","fetch","concat","headers","Authorization","then","response","json","jsonResponse","items","tracks","itemsArray","Object","values","console","log","error","save","playlistTitle","playlistTracks","user_id","id","method","body","JSON","stringify","secondResponse","networkError","message","secondJsonResponse","playlist_id","catch"],"sources":["/Users/alexandresuteau/Desktop/CODE/CODECADEMY/07_Create a Front-End APP with React/99_PROJECT_Jammming/jammming/src/utils/Spotify.js"],"sourcesContent":["const BASE_URL = 'https://accounts.spotify.com/authorize';\nconst RESPONSE_TYPE = '?response_type=token';\nconst CLIENT_ID = \"&client_id=92b7e448f7fe406eaef359748343fe84\";\n// const REDIRECT_URL = \"&redirect_uri=http://localhost:3000/\";\nconst REDIRECT_URL = '&redirect_uri=https://alexs9090909.github.io/jammming/';\nconst SCOPE = '&scope=ugc-image-upload user-read-playback-state user-modify-playback-state user-read-currently-playing playlist-modify-public playlist-modify-private playlist-read-private playlist-read-collaborative';\nlet TOKEN = null;\n\n/*  let apiKey = \"BQCIHk_B6sJGR5f0fhBGM8RI7RzvIWsuCANY6NiKAheSpKsteRPEUTU50kmObhMsHq6xitwlf0_MhjoyZVLnxynTbsnmYF1ewXe4zXdhO9IWo4zp3Z09QiP8xI4awFxC36RdVRU5miChXDanugLoF06-_jI9XoUMu38PVYTDtcjqD14txydNHW_DPG5VLiKgSwo73583W9Zoqv1n7KmRzeXfr2eKeNKsdFHeZXKm3uVNbMq-HHelM6x_3BS6jvQRGhMAHKXV7Q\" */ // Access token à renouveler toutes les heures \n\nconst getToken = () => {\n   \n    if (TOKEN) {\n        return TOKEN;\n    } else if (window.location.hash.length > 1) {\n\n        const hashParameters = {}\n        // window.location.hash.split('&').forEach(i => hashParameters[i] = i);\n        window.location.hash\n            .slice(1) // to remove # sign\n            .split('&') // to split to paramater/value groups))\n            .forEach(item => {\n                const parameter = item.split('=')\n                hashParameters[parameter[0]] = parameter[1];\n            });\n\n        TOKEN = hashParameters.access_token;\n        window.history.pushState('Access Token', '', '/');\n        return TOKEN;\n        \n    } else if (!TOKEN) {\n        const URL = BASE_URL + RESPONSE_TYPE + CLIENT_ID + SCOPE + REDIRECT_URL;\n        window.location = URL;\n    }\n} \n\nconst Spotify = {\n    search(term) {\n\n        let apiKey = getToken();\n        if (!apiKey) return [];        \n\n        return fetch(\n            `https://api.spotify.com/v1/search?q=${term}&type=track`,\n            {\n                headers: {\n                    Authorization: `Bearer ${apiKey}`\n                },\n            }\n\n        )\n            .then((response) => {\n                return response.json();\n            })\n            .then((jsonResponse) => {\n                const items = jsonResponse.tracks && jsonResponse.tracks.items; // Vérification de l'existence de jsonResponse.tracks\n                if (items) {\n                    const itemsArray = Object.values(items);\n                    return itemsArray;\n                } else {\n                    console.log(apiKey)\n                    console.error('La propriété \"tracks\" est manquante dans la réponse de l\\'API.');\n                    return [];\n                }\n            })\n    },\n\n    save(playlistTitle, playlistTracks) {\n\n        let apiKey = getToken();\n        if (!apiKey) return [];   \n\n        return fetch(\n            `https://api.spotify.com/v1/me`,\n            {\n                headers: {\n                    Authorization: `Bearer ${apiKey}`\n                },\n            }\n        )\n            .then((response) => {\n                return response.json();\n            })\n            .then((jsonResponse) => {\n                console.log(jsonResponse)\n                const user_id = jsonResponse.id;\n                return fetch(\n                    `https://api.spotify.com/v1/users/${user_id}/playlists`,\n                    {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${apiKey}`\n                        },\n                        body: JSON.stringify({\n                            \"name\": playlistTitle,\n                            \"description\": \"New playlist description\",\n                            \"public\": false\n                        }),\n                    }\n                )\n                    .then((secondResponse) => {\n                        return secondResponse.json();\n                    }, networkError => console.log(networkError.message)\n                    ).then(secondJsonResponse => {\n                        const playlist_id = secondJsonResponse.id;\n                        // console.log('is playlistTracks an array ? > ' + Array.isArray(playlistTracks));\n                        // console.log(\"content of playlistTracks is : \" + playlistTracks);\n                        return fetch(\n                            `https://api.spotify.com/v1/users/${user_id}/playlists/${playlist_id}/tracks`,\n                            {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    Authorization: `Bearer ${apiKey}`\n                                },\n                                body: JSON.stringify({\n                                    \"uris\": playlistTracks,\n                                }),\n                            }\n                        )\n                    })\n                    ;\n            })\n\n            .catch((error) => {\n                console.error('Erreur lors de la requête  :', error);\n            });\n    }\n}\n\n\nexport { Spotify, getToken };\n\n\n\n/*\n\nhttp://localhost:3000/#access_token=\n\nBQAXmZzANGKXOSaIQaxRlngYF13k3-vjkcTYGIoLthSMBcU_tiYhDtRSeZJr07BxjbZgLR5mmOcsYnnarZYWhK-t-0uX5DS2Vc9pGVwcAOO4GbZiwKC81S1vtLvKMYJhcSCO0kXQa07E1l3yJIm2MIXQ4BTDtoUV1JvHUr2pZ0OKrrP3nPgcYLr2po5V8xtLUhp3MSvAXSf7OW1PiwVMJlEqUY3T8RxUXbjuoIpip4oTh681LyGzHRA5vjmz\n\n&token_type=Bearer&expires_in=3600&state=XPubkNMqxCslAjw0\n\n\nhttp://localhost:3000/#access_token=\n\nBQBQu603MWS2Q51LqWhhpzvX359-d8oxQ4U1YseT05hjzRPKTGV2HXUOabr06FYhbocyvuSDKN-iOSdVfI3Z46y19GtFUr7Gfie1LKnH3VIeoAR-aCtfRqQ28u_FYQ1EnH2cnP7YI8u16cAympJhVNG7PolFX8fRKTI2yLftSx9cJASrv8Yg6c21xrjVOzFYUJwU-CdVByVsIzXohZ8pDtw5E6Pjr0Ws2pwXWxi0tdg3UaZ7Bb_ePpU1swSo\n\n&token_type=Bearer&expires_in=3600&state=emGMhBkNZ1GqYhQw\n\n\n\nhttp://localhost:3000/#access_token=\n\nBQCIHk_B6sJGR5f0fhBGM8RI7RzvIWsuCANY6NiKAheSpKsteRPEUTU50kmObhMsHq6xitwlf0_MhjoyZVLnxynTbsnmYF1ewXe4zXdhO9IWo4zp3Z09QiP8xI4awFxC36RdVRU5miChXDanugLoF06-_jI9XoUMu38PVYTDtcjqD14txydNHW_DPG5VLiKgSwo73583W9Zoqv1n7KmRzeXfr2eKeNKsdFHeZXKm3uVNbMq-HHelM6x_3BS6jvQRGhMAHKXV7Q\n\n&token_type=Bearer&expires_in=3600&state=uTvo6sv20HoYocs8\n\n\n*/\n\n\n/* faire ctrl+z pour enlever toutes les lignes du haut et ca revient à avant authorization work */"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}